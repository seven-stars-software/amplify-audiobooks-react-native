// --- React Native plugin wiring (new style) ---
pluginManagement {
    repositories {
        gradlePluginPortal()
        google()
        mavenCentral()
    }
    // Make the RN Gradle plugin available to this build
    includeBuild("../node_modules/@react-native/gradle-plugin")
}

// This settings plugin replaces the legacy native_modules.gradle apply-from
plugins {
    id("com.facebook.react.settings")
}

includeBuild("../node_modules/@react-native/gradle-plugin") {
    dependencySubstitution {
        substitute(module("com.facebook.react:react-native-gradle-plugin"))
                .using(project(":gradle-plugin:react-native-gradle-plugin"))
    }
}

//https://stackoverflow.com/questions/78721642/upon-attempting-to-deploy-react-native-project-on-android-emulator-experience-r
extensions.configure(com.facebook.react.ReactSettingsExtension){ ex -> ex.autolinkLibrariesFromCommand() }

// --- Dependency resolution (standard for modern RN) ---
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
    repositories {
        mavenCentral()
        google()
        // RNâ€™s local Maven repo (required for resolving RN Android artifacts)
        maven { url("$rootDir/../node_modules/react-native/android") }
        // ðŸ‘‡ Needed for react-native-track-player + react-native-video
        maven { url("https://jitpack.io") }
    }
}

// --- Your project name and modules ---
rootProject.name = "AmplifyAudiobooks"
include(":app")

// --- KEEP: Expo autolinking (unchanged) ---
apply from: new File(
        ["node", "--print", "require.resolve('expo/package.json')"].execute(null, rootDir).text.trim(),
        "../scripts/autolinking.gradle"
)
useExpoModules()